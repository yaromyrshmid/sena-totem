(window["webpackJsonpsena-totem"]=window["webpackJsonpsena-totem"]||[]).push([[0],{158:function(e,t,a){e.exports=a.p+"static/media/logo.edfb4b75.jpg"},167:function(e,t,a){e.exports=a(316)},175:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},311:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(48),c=a.n(l),o=a(28),i=a(8),u=a(45),m=a(152),s=(a(175),a(39)),p=a(327),E=a(323),b=a(12),y=a(5),d=a(319),f=a(320),h=a(321),O=a(72),g=a.n(O),P=g.a.create({baseURL:"https://sena-totem.firebaseio.com/"}),v=function(e){return{type:"SET_DATA_EXP",exp:e}},S=function(e){return{type:"SET_DATA_INC",inc:e}},w=function(e){return{type:"SET_DATA_COMPLECTS",complects:e}},D=function(e,t){return{type:"LOG_IN_SUCCESS",idToken:e,userId:t}},x=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"LOG_OUT"}},j=function(e){return function(t){setTimeout((function(){t(x())}),1e3*e)}};function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var I=function(e){return{type:"SHOW_MODAL",error:e}};function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var N=Object(i.b)((function(e){return{expData:e.data.expData,lists:e.data.lists,idToken:e.auth.idToken}}),(function(e){return{setDataExp:function(t){return e(v(t))},showModal:function(t){return e(I(t))}}}))((function(e){var t=e.lists.wares.map((function(e){return r.a.createElement("option",{key:e,value:e})})),a=e.lists.subwares.map((function(e){return r.a.createElement("option",{key:e,value:e})})),n=e.lists.exps.map((function(e){return r.a.createElement("option",{key:e,value:e})})),l=e.lists.colors.map((function(e){return r.a.createElement("option",{key:e,value:e})}));return r.a.createElement(y.e,{initialValues:{type:"",name:"",color:"",quantity:"",totalPrice:""},validate:function(e){var t={};return e.type||(t.type="\u041d\u0435\u043e\u0431\u0445\u0456\u0434\u043d\u043e \u043e\u0431\u0440\u0430\u0442\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e!"),e.name||(t.name="\u041d\u0435\u043e\u0431\u0445\u0456\u0434\u043d\u043e \u0432\u043d\u0435\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0443!"),!isNaN(e.quantity)&&(0!==e.quantity&&""!==e.quantity||"\u0422\u043e\u0432\u0430\u0440"!==e.type&&"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"!==e.type)||(t.quantity="\u041d\u0435\u0432\u0456\u0440\u043d\u0430 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c!"),e.totalPrice&&!isNaN(e.totalPrice)||(t.totalPrice="\u041d\u0435\u0432\u0456\u0440\u043d\u0430 \u0432\u0430\u0440\u0442\u0456\u0441\u0442\u044c!"),t},onSubmit:function(t,a,n){var r=a.setSubmitting,l=a.resetForm;t.time=(new Date).toISOString().split("T")[0],""===t.color.trim()&&(t.color="\u043d/\u0437"),t.quantity=Number(t.quantity),t.totalPrice=Number(t.totalPrice),P.post("/exp.json?auth="+e.idToken,t).then((function(a){console.log(a),r(!1);var c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.expData,Object(b.a)({},a.data.name,t));e.setDataExp(c),l(n)})).catch((function(t){e.showModal(t.response)}))}},(function(e){var c=e.isSubmitting,o=e.values,i=e.setFieldValue;return r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement(y.d,null,r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement(y.b,{className:"radioInput",type:"radio",name:"type",value:"\u0422\u043e\u0432\u0430\u0440",checked:"\u0422\u043e\u0432\u0430\u0440"===o.type,onChange:function(){return i("type","\u0422\u043e\u0432\u0430\u0440")}}),r.a.createElement("label",null,"\u0422\u043e\u0432\u0430\u0440"),r.a.createElement(y.b,{className:"radioInput",type:"radio",name:"type",value:"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440",checked:"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===o.type,onChange:function(){return i("type","\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440")}}),r.a.createElement("label",null,"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"),r.a.createElement(y.b,{className:"radioInput",type:"radio",name:"type",value:"\u0412\u0438\u0442\u0440\u0430\u0442\u0430",checked:"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"===o.type,onChange:function(){return i("type","\u0412\u0438\u0442\u0440\u0430\u0442\u0430")}}),r.a.createElement("label",null,"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"),r.a.createElement("span",{className:"errorMessage"},r.a.createElement(y.a,{name:"type"})))),r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430"),r.a.createElement(y.b,{name:"name",list:"name"}),r.a.createElement("datalist",{id:"name"},"\u0422\u043e\u0432\u0430\u0440"===o.type&&t,"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===o.type&&a,"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"===o.type&&n),r.a.createElement("span",{className:"errorMessage"},r.a.createElement(y.a,{name:"name"})),r.a.createElement("label",null,"\u041a\u043e\u043b\u0456\u0440"),r.a.createElement(y.b,{name:"color",list:"color"}),r.a.createElement("datalist",{id:"color"},l),r.a.createElement("label",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"),r.a.createElement(y.b,{className:"input-number",name:"quantity",type:"number",disabled:"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"===o.type}),r.a.createElement("span",{className:"errorMessage"},r.a.createElement(y.a,{name:"quantity"})),r.a.createElement("label",null,"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"),r.a.createElement(y.b,{className:"input-number",name:"totalPrice",type:"number"}),r.a.createElement("span",{className:"errorMessage"},r.a.createElement(y.a,{name:"totalPrice"})),r.a.createElement("label",null,"\u0426\u0456\u043d\u0430 \u0437\u0430 \u043e\u0434\u0438\u043d\u0438\u0446\u044e"),r.a.createElement(y.b,{className:"input-number",name:"price",value:isNaN(o.totalPrice/o.quantity)||"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"===o.type?0:(o.totalPrice/o.quantity).toFixed(2),onChange:function(){return i("price",o.totalPrice/o.quantity)},disabled:!0}))),r.a.createElement(f.a,null,r.a.createElement(h.a,{xs:{span:3,offset:9}},r.a.createElement("button",{className:"submitData",type:"submit",disabled:c},"\u0412\u043d\u0435\u0441\u0442\u0438")))))))}))})),F=a(322),_=Object(i.b)((function(e){return{expData:e.data.expData,idToken:e.auth.idToken}}),(function(e){return{setDataExp:function(t){return e(v(t))},showModal:function(t){return e(I(t))}}}))((function(e){var t=function(t){var a=t.target.id;P.delete("/exp/"+a+".json?auth="+e.idToken).then((function(e){console.log(e)})).catch((function(t){e.showModal(t.response)}));var n={};for(var r in e.expData)r!==a&&(n[r]=e.expData[r]);e.setDataExp(n)},a=e.expData?Object.keys(e.expData).reverse().map((function(a,n){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,n+1),r.a.createElement("td",null,e.expData[a].time),r.a.createElement("td",null,e.expData[a].type),r.a.createElement("td",null,e.expData[a].name),r.a.createElement("td",null,e.expData[a].color),r.a.createElement("td",null,e.expData[a].quantity),r.a.createElement("td",null,e.expData[a].totalPrice),r.a.createElement("td",null,(e.expData[a].totalPrice/e.expData[a].quantity).toFixed(2)),r.a.createElement("td",null,r.a.createElement("button",{id:a,onClick:t},"x")))})):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),r.a.createElement("th",null,"\u0422\u0438\u043f"),r.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430"),r.a.createElement("th",null,"\u041a\u043e\u043b\u0456\u0440"),r.a.createElement("th",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"),r.a.createElement("th",null,"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"),r.a.createElement("th",null,"\u0426\u0456\u043d\u0430 \u0437\u0430 \u043e\u0434\u0438\u043d\u0438\u0446\u044e"),r.a.createElement("th",null,"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"))),r.a.createElement("tbody",null,a)))})),C=a(55);function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var A=Object(i.b)((function(e){return{incData:e.data.incData,lists:e.data.lists,complectsData:e.data.complectsData,idToken:e.auth.idToken}}),(function(e){return{setDataInc:function(t){return e(S(t))},showModal:function(t){return e(I(t))}}}))((function(e){var t=Object(n.useState)(null),a=Object(C.a)(t,2),l=a[0],c=a[1],o=e.lists.wares.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})),i=e.lists.subwares.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})),u=e.lists.colors.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}));return r.a.createElement(y.e,{initialValues:{price:"",income:[{type:"",name:"",color:"\u043d/\u0437",quantity:""}]},validate:function(e){var t={};return e.price&&!isNaN(e.price)||(t.price="\u041d\u0435\u0432\u0456\u0440\u043d\u0430 \u0446\u0456\u043d\u0430!"),e.income.length<1&&(t.income="\u041d\u0435 \u0432\u043d\u0435\u0441\u0435\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u0443!"),e.income.map((function(a,n){e.income[n].type||(t.type="\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f \u0442\u043e\u0432\u0430\u0440\u0443 \u043d\u0435 \u043e\u0431\u0440\u0430\u043d\u0430!"),e.income[n].name&&"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"!==e.income[n].name||(t.name="\u041d\u0430\u0437\u0432\u0430 \u0442\u043e\u0432\u0430\u0440\u0443 \u043d\u0435 \u043e\u0431\u0440\u0430\u043d\u0430!"),(isNaN(e.income[n].quantity)||0===e.income[n].quantity||""===e.income[n].quantity)&&(t.quantity="\u041d\u0435\u0432\u0456\u0440\u043d\u0430 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c!")})),t},isSubmitting:!1,onSubmit:function(t,a,n){var r=a.setSubmitting,l=a.resetForm;t.time=(new Date).toISOString().split("T")[0],P.post("/inc.json?auth="+e.idToken,t).then((function(a){console.log(a),r(!1);var c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.incData,Object(b.a)({},a.data.name,t));e.setDataInc(c),l(n)})).catch((function(t){e.showModal(t.response)}))},render:function(t){var a=t.isSubmitting,n=t.values,m=t.setFieldValue;return r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement(y.d,null,r.a.createElement(f.a,null,r.a.createElement(h.a,{xs:2},r.a.createElement("label",null,"\u0426\u0456\u043d\u0430",r.a.createElement(y.b,{className:"input-number",name:"price",type:"number"}),r.a.createElement("span",{className:"errorMessage"},r.a.createElement(y.a,{name:"price"})),r.a.createElement("span",{className:"errorMessage"},r.a.createElement(y.a,{name:"type"})),r.a.createElement("span",{className:"errorMessage"},r.a.createElement(y.a,{name:"name"})),r.a.createElement("span",{className:"errorMessage"},r.a.createElement(y.a,{name:"quantity"})))),r.a.createElement(h.a,{xs:10},r.a.createElement("button",{type:"button",onClick:function(){return function(t){if(t.income.length>0)if(t.income[0].quantity>0&&"\u043d/\u0437"!==t.income[0].color)if("\u0422\u043e\u0432\u0430\u0440"===t.income[0].type&&1===t.income.length&&""!==t.income[0].name){c(null);var a=null;Object.keys(e.complectsData).map((function(n){e.complectsData[n].name===t.income[0].name&&(a=e.complectsData[n].complect)})),a.map((function(e){t.income.push({type:"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440",name:e.name,color:e.copyColor?t.income[0].color:"\u043d/\u0437",quantity:t.income[0].quantity})})),c(r.a.createElement("span",null,"\u0413\u043e\u0442\u043e\u0432\u043e!"))}else c(r.a.createElement("span",{className:"errorMessage"},"\u041d\u0435 \u043e\u0431\u0440\u0430\u043d\u043e \u0442\u043e\u0432\u0430\u0440!"));else c(r.a.createElement("span",{className:"errorMessage"},"\u041d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u043e \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0430\u0431\u043e \u043a\u043e\u043b\u0456\u0440!"));else c(r.a.createElement("span",{className:"errorMessage"},"\u041d\u0435 \u043e\u0431\u0440\u0430\u043d\u043e \u0442\u043e\u0432\u0430\u0440!"))}(n)}}," \u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442 "),l)),r.a.createElement(y.c,{name:"income",render:function(e){return r.a.createElement(r.a.Fragment,null,n.income&&n.income.length>0?n.income.map((function(t,a){return r.a.createElement(f.a,{key:a},r.a.createElement(h.a,null,r.a.createElement("fieldset",null,r.a.createElement(y.b,{className:"radioInput",type:"radio",name:"income.".concat(a,".type"),value:"\u0422\u043e\u0432\u0430\u0440",checked:"\u0422\u043e\u0432\u0430\u0440"===n.income[a].type,onChange:function(){return m("income.".concat(a,".type"),"\u0422\u043e\u0432\u0430\u0440")}}),r.a.createElement("label",null,"\u0422\u043e\u0432\u0430\u0440"),r.a.createElement(y.b,{className:"radioInput",type:"radio",name:"income.".concat(a,".type"),value:"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440",checked:"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===n.income[a].type,onChange:function(){return m("income.".concat(a,".type"),"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440")}}),r.a.createElement("label",null,"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440")),r.a.createElement("fieldset",null,r.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430"),r.a.createElement(y.b,{component:"select",name:"income.".concat(a,".name")},r.a.createElement("option",{value:"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"},"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"),"\u0422\u043e\u0432\u0430\u0440"===n.income[a].type&&o,"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===n.income[a].type&&i),r.a.createElement("label",null,"\u041a\u043e\u043b\u0456\u0440"),r.a.createElement(y.b,{component:"select",name:"income.".concat(a,".color")},u),r.a.createElement("label",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"),r.a.createElement(y.b,{className:"input-number",name:"income.".concat(a,".quantity"),type:"number"})),r.a.createElement("button",{className:"button-x",type:"button",onClick:function(){return e.remove(a)}},"x")))})):null,r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement("button",{type:"button",onClick:function(){e.push({type:"",name:"\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443",color:"\u043d/\u0437",quantity:""})}},"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a"))),r.a.createElement(f.a,null,r.a.createElement(h.a,{xs:{span:3,offset:9}},r.a.createElement("button",{className:"submitData",type:"submit",disabled:a},"\u0412\u043d\u0435\u0441\u0442\u0438"))))}})))))}})})),L=Object(i.b)((function(e){return{incData:e.data.incData,loaded:e.data.loaded,idToken:e.auth.idToken}}),(function(e){return{setDataInc:function(t){return e(S(t))},showModal:function(t){return e(I(t))}}}))((function(e){var t=function(t){var a=t.target.id;P.delete("/inc/"+a+".json?auth="+e.idToken).then((function(e){console.log(e)})).catch((function(t){e.showModal(t.response)}));var n={};for(var r in e.incData)r!==a&&(n[r]=e.incData[r]);e.setDataInc(n)},a=e.loaded?Object.keys(e.incData).reverse().map((function(a,n){var l=e.incData[a].income.map((function(e,t){return r.a.createElement("tr",{key:"".concat(a,"_").concat(t)},r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,e.type),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.color),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null),r.a.createElement("td",null))}));return r.a.createElement("tbody",{key:a},r.a.createElement("tr",null,r.a.createElement("td",null,n+1),r.a.createElement("td",null,e.incData[a].time),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,e.incData[a].price),r.a.createElement("td",null,r.a.createElement("button",{id:a,onClick:t},"x"))),l)})):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),r.a.createElement("th",null,"\u0422\u0438\u043f"),r.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430"),r.a.createElement("th",null,"\u041a\u043e\u043b\u0456\u0440"),r.a.createElement("th",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"),r.a.createElement("th",null,"\u0426\u0456\u043d\u0430"),r.a.createElement("th",null,"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"))),a))})),R=Object(i.b)((function(e){return{expTable:e.tables.expTable,incTable:e.tables.incTable,loaded:e.tables.loaded}}))((function(e){var t={quantityE:0,totalPriceE:0,quantityI:0,totalPriceI:0,quantityS:0,totalPriceS:0},a=e.loaded?Object.keys(e.expTable.ware).sort().map((function(a,n){var l={};l.name=a,l.colors=[];for(var c=0;c<e.expTable.ware[a].length;c++){var o={};if(o.color=e.expTable.ware[a][c].color,o.quantityE=e.expTable.ware[a][c].quantity,o.totalPriceE=e.expTable.ware[a][c].totalPrice,o.priceE=e.expTable.ware[a][c].price,e.incTable.ware[a]){for(var i=!1,u=0;u<e.incTable.ware[a].length;u++)e.incTable.ware[a][u].color===o.color&&(i=u);"number"==typeof i?(o.quantityI=e.incTable.ware[a][i].quantity,o.totalPriceI=e.incTable.ware[a][i].totalPrice,o.priceI=e.incTable.ware[a][i].price!==1/0?e.incTable.ware[a][i].price:0,o.quantityS=o.quantityE-o.quantityI,o.priceS=o.priceI?o.priceI:o.priceE,o.totalPriceS=o.priceS*o.quantityS):(o.quantityI=0,o.totalPriceI=0,o.priceI=0,o.quantityS=o.quantityE,o.totalPriceS=o.totalPriceE,o.priceS=o.priceE)}else o.quantityI=0,o.totalPriceI=0,o.priceI=0,o.quantityS=o.quantityE,o.totalPriceS=o.totalPriceE,o.priceS=o.priceE;l.colors.push(o)}l.quantityE=0,l.quantityI=0,l.quantityS=0,l.totalPriceE=0,l.totalPriceI=0,l.totalPriceS=0,l.colors.map((function(e){l.quantityE+=e.quantityE,l.quantityI+=e.quantityI,l.quantityS+=e.quantityS,l.totalPriceE+=e.totalPriceE,l.totalPriceI+=e.totalPriceI,l.totalPriceS+=e.totalPriceS})),l.priceE=l.totalPriceE/l.quantityE,l.priceI=0===l.totalPriceI||0===l.quantityI?0:l.totalPriceI/l.quantityI,l.priceS=l.totalPriceS/l.quantityS;var m=r.a.createElement("tr",null,r.a.createElement("th",null,n+1),r.a.createElement("th",null,l.name),r.a.createElement("th",null),r.a.createElement("th",null,l.quantityE),r.a.createElement("th",null,l.totalPriceE.toFixed(0)),r.a.createElement("th",null,l.priceE.toFixed(2)),r.a.createElement("th",null,l.quantityI),r.a.createElement("th",null,l.totalPriceI.toFixed(0)),r.a.createElement("th",null,l.priceI.toFixed(2)),r.a.createElement("th",null,l.quantityS),r.a.createElement("th",null,l.totalPriceS.toFixed(0)),r.a.createElement("th",null,l.priceS.toFixed(2))),s=l.colors.map((function(e,t){return r.a.createElement("tr",{key:"".concat(l.name,"_").concat(e.color)},r.a.createElement("td",null,"".concat(n+1,".").concat(t+1)),r.a.createElement("td",null),r.a.createElement("td",null,e.color),r.a.createElement("td",null,e.quantityE),r.a.createElement("td",null,e.totalPriceE.toFixed(0)),r.a.createElement("td",null,e.priceE.toFixed(2)),r.a.createElement("td",null,e.quantityI),r.a.createElement("td",null,e.totalPriceI.toFixed(0)),r.a.createElement("td",null,e.priceI.toFixed(2)),r.a.createElement("td",null,e.quantityS),r.a.createElement("td",null,e.totalPriceS.toFixed(0)),r.a.createElement("td",null,e.priceS.toFixed(2)))}));return t.quantityE+=l.quantityE,t.totalPriceE+=l.totalPriceE,t.quantityI+=l.quantityI,t.totalPriceI+=l.totalPriceI,t.quantityS+=l.quantityS,t.totalPriceS+=l.totalPriceS,r.a.createElement("tbody",{key:a},m,s)})):null,n=e.loaded?Object.keys(e.expTable.subware).sort().map((function(a,n){var l={};l.name=a,l.colors=[];for(var c=0;c<e.expTable.subware[a].length;c++){var o={};if(o.color=e.expTable.subware[a][c].color,o.quantityE=e.expTable.subware[a][c].quantity,o.totalPriceE=e.expTable.subware[a][c].totalPrice,o.priceE=e.expTable.subware[a][c].price,e.incTable.subware[a]){for(var i=!1,u=0;u<e.incTable.subware[a].length;u++)e.incTable.subware[a][u].color===o.color&&(i=u);"number"==typeof i?(o.quantityI=e.incTable.subware[a][i].quantity,o.totalPriceI=e.incTable.subware[a][i].totalPrice,o.priceI=e.incTable.subware[a][i].price!==1/0?e.incTable.subware[a][i].price:0,o.quantityS=o.quantityE-o.quantityI,o.priceS=o.priceI?o.priceI:o.priceE,o.totalPriceS=o.priceS*o.quantityS):(o.quantityI=0,o.totalPriceI=0,o.priceI=0,o.quantityS=o.quantityE,o.totalPriceS=o.totalPriceE,o.priceS=o.priceE)}else o.quantityI=0,o.totalPriceI=0,o.priceI=0,o.quantityS=o.quantityE,o.totalPriceS=o.totalPriceE,o.priceS=o.priceE;l.colors.push(o)}l.quantityE=0,l.quantityI=0,l.quantityS=0,l.totalPriceE=0,l.totalPriceI=0,l.totalPriceS=0,l.colors.map((function(e){l.quantityE+=e.quantityE,l.quantityI+=e.quantityI,l.quantityS+=e.quantityS,l.totalPriceE+=e.totalPriceE,l.totalPriceI+=e.totalPriceI,l.totalPriceS+=e.totalPriceS})),l.priceE=l.totalPriceE/l.quantityE,l.priceI=0===l.totalPriceI||0===l.quantityI?0:l.totalPriceI/l.quantityI,l.priceS=l.totalPriceS/l.quantityS;var m=r.a.createElement("tr",null,r.a.createElement("th",null,n+1),r.a.createElement("th",null,l.name),r.a.createElement("th",null),r.a.createElement("th",null,l.quantityE),r.a.createElement("th",null,l.totalPriceE.toFixed(0)),r.a.createElement("th",null,l.priceE.toFixed(2)),r.a.createElement("th",null,l.quantityI),r.a.createElement("th",null,l.totalPriceI.toFixed(0)),r.a.createElement("th",null,l.priceI.toFixed(2)),r.a.createElement("th",null,l.quantityS),r.a.createElement("th",null,l.totalPriceS.toFixed(0)),r.a.createElement("th",null,l.priceS.toFixed(2))),s=l.colors.map((function(e,t){return r.a.createElement("tr",{key:"".concat(l.name,"_").concat(e.color)},r.a.createElement("td",null,"".concat(n+1,".").concat(t+1)),r.a.createElement("td",null),r.a.createElement("td",null,e.color),r.a.createElement("td",null,e.quantityE),r.a.createElement("td",null,e.totalPriceE.toFixed(0)),r.a.createElement("td",null,e.priceE.toFixed(2)),r.a.createElement("td",null,e.quantityI),r.a.createElement("td",null,e.totalPriceI.toFixed(0)),r.a.createElement("td",null,e.priceI.toFixed(2)),r.a.createElement("td",null,e.quantityS),r.a.createElement("td",null,e.totalPriceS.toFixed(0)),r.a.createElement("td",null,e.priceS.toFixed(2)))}));return t.quantityE+=l.quantityE,t.totalPriceE+=l.totalPriceE,t.quantityI+=l.quantityI,t.totalPriceI+=l.totalPriceI,t.quantityS+=l.quantityS,t.totalPriceS+=l.totalPriceS,r.a.createElement("tbody",{key:a},m,s)})):null,l=r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"\u0412\u0441\u044c\u043e\u0433\u043e"),r.a.createElement("th",null),r.a.createElement("th",null,t.quantityE),r.a.createElement("th",null,t.totalPriceE.toFixed(2)),r.a.createElement("th",null),r.a.createElement("th",null,t.quantityI),r.a.createElement("th",null,t.totalPriceI.toFixed(2)),r.a.createElement("th",null),r.a.createElement("th",null,t.quantityS),r.a.createElement("th",null,t.totalPriceS.toFixed(2)),r.a.createElement("th",null));return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"\u0422\u043e\u0432\u0430\u0440"),r.a.createElement("th",null,"\u041a\u043e\u043b\u0456\u0440"),r.a.createElement("th",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0432\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u043e"),r.a.createElement("th",null,"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u0432\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u043e"),r.a.createElement("th",null,"\u0421\u043e\u0431\u0456\u0432\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u043e\u0434\u0438\u043d\u0438\u0446\u0456"),r.a.createElement("th",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u043d\u043e"),r.a.createElement("th",null,"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u043d\u043e"),r.a.createElement("th",null,"\u0426\u0456\u043d\u0430 \u043e\u0434\u0438\u043d\u0438\u0446\u0456 \u043f\u0440\u043e\u0434\u0430\u043d\u043e"),r.a.createElement("th",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456"),r.a.createElement("th",null,"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456"),r.a.createElement("th",null,"\u0426\u0456\u043d\u0430 \u043e\u0434\u0438\u043d\u0438\u0446\u0456 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456"))),a,n,r.a.createElement("tbody",null,l)))})),B=Object(i.b)((function(e){return{expData:e.data.expData,incData:e.data.incData}}),(function(e){return{createExpTable:function(t){return e(function(e){var t={},a={},n={},r={};return e&&(Object.keys(e).map((function(r,l){if("\u0422\u043e\u0432\u0430\u0440"===e[r].type)if(t.hasOwnProperty(e[r].name)){for(var c=!1,o=0;o<t[e[r].name].length;o++)e[r].color===t[e[r].name][o].color&&(t[e[r].name][o].quantity+=e[r].quantity,t[e[r].name][o].totalPrice+=e[r].totalPrice,t[e[r].name][o].price=t[e[r].name][o].totalPrice/t[e[r].name][o].quantity,c=!0);if(!c){var i={};i.color=e[r].color,i.quantity=e[r].quantity,i.totalPrice=e[r].totalPrice,i.price=e[r].totalPrice/e[r].quantity,t[e[r].name].push(i)}}else{t[e[r].name]=[];var u={};u.color=e[r].color,u.quantity=e[r].quantity,u.totalPrice=e[r].totalPrice,u.price=e[r].totalPrice/e[r].quantity,t[e[r].name].push(u)}if("\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===e[r].type)if(a.hasOwnProperty(e[r].name)){for(var m=!1,s=0;s<a[e[r].name].length;s++)e[r].color===a[e[r].name][s].color&&(a[e[r].name][s].quantity+=e[r].quantity,a[e[r].name][s].totalPrice+=e[r].totalPrice,a[e[r].name][s].price=a[e[r].name][s].totalPrice/a[e[r].name][s].quantity,m=!0);if(!m){var p={};p.color=e[r].color,p.quantity=e[r].quantity,p.totalPrice=e[r].totalPrice,p.price=e[r].totalPrice/e[r].quantity,a[e[r].name].push(p)}}else{a[e[r].name]=[];var E={};E.color=e[r].color,E.quantity=e[r].quantity,E.totalPrice=e[r].totalPrice,E.price=e[r].totalPrice/e[r].quantity,a[e[r].name].push(E)}if("\u0412\u0438\u0442\u0440\u0430\u0442\u0430"===e[r].type)if(n.hasOwnProperty(e[r].name)){for(var b=!1,y=0;y<n[e[r].name].length;y++)e[r].color===n[e[r].name][y].color&&(n[e[r].name][y].quantity+=e[r].quantity,n[e[r].name][y].totalPrice+=e[r].totalPrice,n[e[r].name][y].price=n[e[r].name][y].totalPrice/n[e[r].name][y].quantity,b=!0);if(!b){var d={};d.color=e[r].color,d.quantity=e[r].quantity,d.totalPrice=e[r].totalPrice,d.price=e[r].totalPrice/e[r].quantity,n[e[r].name].push(d)}}else{n[e[r].name]=[];var f={};f.color=e[r].color,f.quantity=e[r].quantity,f.totalPrice=e[r].totalPrice,f.price=e[r].totalPrice/e[r].quantity,n[e[r].name].push(f)}})),r.ware=t,r.subware=a,r.exp=n),{type:"CREATE_EXP_TABLE",expTable:r}}(t))},createIncTable:function(t){return e(function(e){var t={},a={},n={};return e&&(Object.keys(e).map((function(n,r){e[n].income.map((function(r,l){var c={type:r.type},o=0===l?e[n].price:0;if(c[r.name]={color:r.color,quantity:r.quantity,totalPrice:o,price:r.quantity/o},"\u0422\u043e\u0432\u0430\u0440"===c.type)if(t[e[n].income[l].name]){for(var i=!1,u=0;u<t[e[n].income[l].name].length;u++)t[e[n].income[l].name][u].color===c[r.name].color&&(t[e[n].income[l].name][u].quantity+=c[r.name].quantity,t[e[n].income[l].name][u].totalPrice+=c[r.name].totalPrice,t[e[n].income[l].name][u].price=t[e[n].income[l].name][u].totalPrice/t[e[n].income[l].name][u].quantity,i=!0);i||t[e[n].income[l].name].push(c[r.name])}else t[e[n].income[l].name]=[],t[e[n].income[l].name].push(c[r.name]);else if("\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===c.type)if(a[e[n].income[l].name]){for(var m=!1,s=0;s<a[e[n].income[l].name].length;s++)a[e[n].income[l].name][s].color===c[r.name].color&&(a[e[n].income[l].name][s].quantity+=c[r.name].quantity,a[e[n].income[l].name][s].totalPrice+=c[r.name].totalPrice,a[e[n].income[l].name][s].price=a[e[n].income[l].name][s].totalPrice/a[e[n].income[l].name][s].quantity,m=!0);m||a[e[n].income[l].name].push(c[r.name])}else a[e[n].income[l].name]=[],a[e[n].income[l].name].push(c[r.name])}))})),n.ware=t,n.subware=a),{type:"CREATE_INC_TABLE",incTable:n}}(t))}}}))((function(e){return Object(n.useEffect)((function(){e.createExpTable(e.expData),e.createIncTable(e.incData)}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(R,null))}));function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var H=Object(i.b)((function(e){return{complectsData:e.data.complectsData,lists:e.data.lists,idToken:e.auth.idToken}}),(function(e){return{setDataComplects:function(t){return e(w(t))},showModal:function(t){return e(I(t))}}}))((function(e){var t=e.lists.wares.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})),a=e.lists.subwares.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}));return r.a.createElement(y.e,{initialValues:{name:"",complect:[{name:"",copyColor:!1}]},validate:function(t){var a={},n=0;return Object.keys(e.complectsData).map((function(a){e.complectsData[a].name===t.name&&n++})),n>0&&(a.complectExists="\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442 \u0432\u0436\u0435 \u0456\u0441\u043d\u0443\u0454"),""===t.name&&(a.name="\u041d\u0435 \u0432\u043d\u0435\u0441\u0435\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u0443!"),t.complect.length<1&&(a.complect="\u041d\u0435 \u0432\u043d\u0435\u0441\u0435\u043d\u043e \u0441\u0443\u043f\u0443\u0442\u043d\u044c\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0443!"),t.complect.map((function(e,n){t.complect[n].name&&"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"!==t.complect[n].name||(a.name="\u041d\u0430\u0437\u0432\u0430 \u0441\u0443\u043f\u0443\u0442\u043d\u044c\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0443 \u043d\u0435 \u043e\u0431\u0440\u0430\u043d\u0430!")})),a},isSubmitting:!1,onSubmit:function(t,a,n){var r=a.setSubmitting,l=a.resetForm;t.time=(new Date).toISOString().split("T")[0],P.post("/complects.json?auth="+e.idToken,t).then((function(a){console.log(a),r(!1);var c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.complectsData,Object(b.a)({},a.data.name,t));e.setDataComplects(c),l(n)})).catch((function(t){e.showModal(t.response)}))},render:function(e){var n=e.isSubmitting,l=e.values;e.setFieldValue;return r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement(y.d,null,r.a.createElement("fieldset",null,r.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430"),r.a.createElement(y.b,{component:"select",name:"name"},r.a.createElement("option",{value:"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"},"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"),t)),r.a.createElement(y.c,{name:"complect",render:function(e){return r.a.createElement(r.a.Fragment,null,l.complect&&l.complect.length>0?l.complect.map((function(t,n){return r.a.createElement(f.a,{key:n},r.a.createElement(h.a,{xs:5},r.a.createElement("fieldset",null,r.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430 \u0441\u0443\u043f\u0443\u0442\u043d\u044c\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0443"),r.a.createElement(y.b,{component:"select",name:"complect.".concat(n,".name")},r.a.createElement("option",{value:"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"},"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"),a))),r.a.createElement(h.a,{xs:2},r.a.createElement("fieldset",null,r.a.createElement("label",null,"\u041c\u0430\u0454 \u043a\u043e\u043b\u0456\u0440"),r.a.createElement(y.b,{name:"complect.".concat(n,".copyColor"),type:"checkbox",value:"complect.".concat(n,".copyColor"),className:"checkbox"}))),r.a.createElement(h.a,{xs:1},r.a.createElement("button",{className:"button-x",type:"button",onClick:function(){return e.remove(n)}},"x")))})):null,r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement("button",{type:"button",onClick:function(){e.push({name:"",copyColor:!1})}},"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a"))),r.a.createElement(f.a,null,r.a.createElement(h.a,{xs:{span:3,offset:9}},r.a.createElement("button",{className:"submitData",type:"submit",disabled:n},"\u0412\u043d\u0435\u0441\u0442\u0438"))))}})))))}})})),V=Object(i.b)((function(e){return{complectsData:e.data.complectsData,loaded:e.data.loaded,idToken:e.auth.idToken}}),(function(e){return{setDataComplects:function(t){return e(w(t))},showModal:function(t){return e(I(t))}}}))((function(e){var t=function(t){var a=t.target.id;P.delete("/complects/"+a+".json?auth="+e.idToken).then((function(e){console.log(e)})).catch((function(t){e.showModal(t.response)}));var n={};for(var r in e.complectsData)r!==a&&(n[r]=e.complectsData[r]);e.setDataComplects(n)},a=e.loaded?Object.keys(e.complectsData).reverse().map((function(a,n){var l=e.complectsData[a].complect.map((function(e,t){return r.a.createElement("tr",{key:"".concat(a,"_").concat(t)},r.a.createElement("td",null),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.copyColor?"\u0422\u0430\u043a":"\u041d\u0456"),r.a.createElement("td",null))}));return r.a.createElement("tbody",{key:a},r.a.createElement("tr",null,r.a.createElement("td",null,n+1),r.a.createElement("td",null,e.complectsData[a].name),r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("button",{id:a,onClick:t},"x"))),l)})):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430"),r.a.createElement("th",null,"\u0427\u0438 \u043c\u0430\u0454 \u043a\u043e\u043b\u0456\u0440"),r.a.createElement("th",null,"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"))),a))})),K=(a(196),a(197),Object(i.b)((function(e){return{authData:e.auth,expData:e.data.expData,incData:e.data.incData,gotError:e.ui.gotError}}),(function(e){return{getDataEI:function(t){return e(function(e){return function(t){P.get("/.json?auth="+e).then((function(e){console.log(e.data),t(v(e.data.exp)),t(S(e.data.inc)),t(w(e.data.complects))})).catch((function(e){t(I(e.response))}))}}(t))},createFormLists:function(t){return e(function(e){var t=[],a=[],n=[],r=[];return Object.keys(e).map((function(l){switch(e[l].type){case"\u0422\u043e\u0432\u0430\u0440":t.indexOf(e[l].name)>-1||t.push(e[l].name);break;case"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440":a.indexOf(e[l].name)>-1||a.push(e[l].name);break;case"\u0412\u0438\u0442\u0440\u0430\u0442\u0430":n.indexOf(e[l].name)>-1||n.push(e[l].name)}r.indexOf(e[l].color)>-1||r.push(e[l].color)})),t.sort(),a.sort(),n.sort(),r.sort(),{type:"CREATE_FORM_LISTS",lists:{wares:t,subwares:a,exps:n,colors:r}}}(t))}}}))((function(e){return Object(n.useEffect)((function(){e.getDataEI(e.authData.idToken)}),[e.gotError]),Object(n.useEffect)((function(){e.expData&&Object.keys(e.expData).length>0&&e.createFormLists(e.expData)}),[e.expData]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{defaultActiveKey:"storage",id:"uncontrolled-tab-example"},r.a.createElement(E.a,{eventKey:"exp",title:"\u0412\u0438\u0442\u0440\u0430\u0442\u0438"},r.a.createElement(N,null),r.a.createElement(_,null)),r.a.createElement(E.a,{eventKey:"inc",title:"\u0414\u043e\u0445\u043e\u0434\u0438"},r.a.createElement(A,null),r.a.createElement(L,null)),r.a.createElement(E.a,{eventKey:"storage",title:"\u0421\u043a\u043b\u0430\u0434"},r.a.createElement(B,null)),r.a.createElement(E.a,{eventKey:"complects",title:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0438"},r.a.createElement(H,null),r.a.createElement(V,null))),!e.authData.signedIn&&r.a.createElement(s.a,{to:"/"}))}))),U=(a(208),Object(i.b)((function(e){return{}}),(function(e){return{logIn:function(t){return e(function(e){return function(t){t({type:"LOG_IN_START"}),e.returnSecureToken=!0,g.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDFX9LAlOi-6ONPEXG3hw22qJT5aIo91Z4",e).then((function(e){var a=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("userId",e.data.localId),localStorage.setItem("expirationDate",a),t(D(e.data.idToken,e.data.localId)),t(j(e.data.expiresIn))})).catch((function(e){console.log(e.response),t(I(e.response)),t({type:"LOG_IN_LOADING_OFF"})}))}}(t))}}}))((function(e){return r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement("div",{className:"authForm"},r.a.createElement(y.e,{initialValues:{email:"",password:""},onSubmit:function(t,a){var n=a.setSubmitting;e.logIn(t),n(!1)}},(function(e){var t=e.isSubmitting;e.values,e.setFieldValue;return r.a.createElement(y.d,null,r.a.createElement(y.b,{type:"email",name:"email",placeholder:"Email"}),r.a.createElement(y.b,{type:"password",name:"password",placeholder:"Password"}),r.a.createElement("button",{type:"submit",disabled:t},"Log In"))}))))))}))),W=a(326),X=a(324),J=a(166),z=a(158),Z=a.n(z),$=(a(209),Object(i.b)((function(e){return{authState:e.auth.signedIn}}),(function(e){return{logOut:function(){return e(x())}}}))((function(e){return r.a.createElement(W.a,{bg:"dark",variant:"dark"},r.a.createElement(o.b,{to:"/",exact:!0},r.a.createElement(W.a.Brand,null,r.a.createElement(X.a,{src:Z.a})," ")),r.a.createElement(J.a,{className:"mr-auto"},r.a.createElement(o.b,{className:"nav-link",to:"/",exact:!0},"Home"),e.authState&&r.a.createElement(o.b,{className:"nav-link",to:"/workarea",exact:!0},"Work Area"),e.authState&&r.a.createElement("button",{className:"logout",onClick:e.logOut},"Log Out")))}))),Q=a(325),Y=function(e){return r.a.createElement(Q.a,{data:[{x:1,y:e.chartData.exp,y0:0,label:"\u0412\u0438\u0442\u0440\u0430\u0442\u0438",labelNumber:e.chartData.exp},{x:2,y:e.chartData.inc,y0:0,label:"\u0414\u043e\u0445\u043e\u0434\u0438",labelNumber:e.chartData.inc},{x:3,y:e.chartData.inc,y0:e.chartData.exp,label:"\u041f\u0440\u0438\u0431\u0443\u0442\u043e\u043a",labelNumber:e.chartData.profit}],events:[{target:"data",eventHandlers:{onClick:function(){return[{target:"labels",mutation:function(e){return e.text==="".concat(e.datum.labelNumber.toFixed(0)," \u0433\u0440\u043d.")?null:{text:"".concat(e.datum.labelNumber.toFixed(0)," \u0433\u0440\u043d.")}}}]}}}]})},ee=(a(311),Object(i.b)((function(e){return{expTable:e.tables.expTable,incTable:e.tables.incTable,totalStatsTable:e.tables.totalStatsTable,incErrors:e.tables.incErrors}}),(function(e){return{countTotalStats:function(t,a){return e(function(e,t){var a={exp:{ware:0,subware:0,exp:0},inc:{ware:0,subware:0}};return e&&Object.keys(e).length>0&&Object.keys(e.ware).length>0&&Object.keys(e.subware).length>0&&Object.keys(e.exp).length>0&&Object.keys(e).map((function(t){Object.keys(e[t]).map((function(n){e[t][n].map((function(e){a.exp[t]+=e.totalPrice}))}))})),t&&Object.keys(t).length>0&&Object.keys(t.ware).length>0&&Object.keys(t.subware).length>0&&Object.keys(t).map((function(e){Object.keys(t[e]).map((function(n){t[e][n].map((function(t){a.inc[e]+=t.totalPrice}))}))})),{type:"COUNT_TOTAL_STATS",totalStatsTable:a}}(t,a))},checkForIncErrors:function(t,a){return e(function(e,t){var a=T({},t.ware,{},t.subware),n=T({},e.ware,{},e.subware),r=[];return Object.keys(a).map((function(e){a[e].map((function(t,a){if(n[e]){var l=!0;n[e].map((function(e){e.color===t.color&&(l=!1)})),l&&r.push(Object(b.a)({},"".concat(e),t))}else r.push(Object(b.a)({},"".concat(e),0))}))})),{type:"CHECK_FOR_INC_ERRORS",incErrors:r}}(t,a))}}}))((function(e){var t=Object(n.useState)(!1),a=Object(C.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)({exp:0,inc:0,profit:0}),i=Object(C.a)(o,2),u=i[0],m=i[1];Object(n.useEffect)((function(){e.countTotalStats(e.expTable,e.incTable),e.checkForIncErrors(e.expTable,e.incTable),c(!0)}),[e.expTable,e.incTable]),Object(n.useEffect)((function(){if(l){var t={exp:e.totalStatsTable.exp.ware+e.totalStatsTable.exp.subware+e.totalStatsTable.exp.exp,inc:e.totalStatsTable.inc.ware+e.totalStatsTable.inc.subware,profit:e.totalStatsTable.inc.ware+e.totalStatsTable.inc.subware-(e.totalStatsTable.exp.ware+e.totalStatsTable.exp.subware+e.totalStatsTable.exp.exp)};m(t)}}),[l]);var s=l?e.incErrors.map((function(e,t){return r.a.createElement("p",{key:t},r.a.createElement("span",{className:"errorMessage"},Object.keys(e).toString(),", \u043a\u043e\u043b\u0456\u0440: ",e[Object.keys(e)].color,", \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c: ",e[Object.keys(e)].quantity,", \u0437\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0432\u0430\u0440\u0442\u0456\u0441\u0442\u044c ",e[Object.keys(e)].totalPrice))})):null;return r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement("div",{className:"chart"},r.a.createElement(Y,{chartData:u})))),e.incErrors.length>0&&r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement("h1",null,"\u0412\u0438\u044f\u0432\u043b\u0435\u043d\u043e \u043f\u043e\u043c\u0438\u043b\u043a\u0438 \u0443 \u0434\u043e\u0445\u043e\u0434\u0430\u0445:"),s)))}))),te=(a(312),function(){return r.a.createElement("div",{className:"loader"},"loading... :)")}),ae=a(17),ne=(a(313),Object(i.b)((function(e){return{show:e.ui.gotError}}),(function(e){return{hideModal:function(){return e({type:"HIDE_MODAL"})}}}))((function(e){return r.a.createElement(ae.e,{mountOnEnter:!0,unmountOnExit:!0,in:e.show,timeout:0},(function(t){var a="entered"===t?"BackdropOpen":"exited"===t?"BackdropClosed":null;return r.a.createElement("div",{className:"Backdrop ".concat(a),onClick:e.hideModal})}))}))),re=(a(314),Object(i.b)((function(e){return{show:e.ui.gotError,error:e.ui.error}}),(function(e){return{hideModal:function(){return e({type:"HIDE_MODAL"})}}}))((function(e){return r.a.createElement(ae.e,{mountOnEnter:!0,unmountOnExit:!0,in:e.show,timeout:500},(function(t){var a="entering"===t?"ModalOpen":"exiting"===t?"ModalClosed":null;return r.a.createElement("div",{className:"Modal ".concat(a)},r.a.createElement("h1",null,"\u041f\u0440\u043e\u0431\u043b\u0454\u043c\u043a\u0430"),r.a.createElement("div",null,r.a.createElement("p",{className:"errorMessage"},e.error.status),r.a.createElement("p",{className:"errorMessage"},e.error.statusText)),r.a.createElement("button",{className:"Button",onClick:e.hideModal},r.a.createElement(o.b,{className:"nav-link",to:"/",exact:!0},"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044c")))}))}))),le=(a(315),Object(i.b)((function(e){return{authData:e.auth,gotError:e.ui.gotError,error:e.ui.error}}),(function(e){return{authCheckState:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var a=new Date(localStorage.getItem("expirationDate"));if(a<=new Date)e(x());else{var n=localStorage.getItem("userId");e(D(t,n)),e(j((a.getTime()-(new Date).getTime())/1e3))}}else e(x())}))}}}))((function(e){return Object(n.useEffect)((function(){e.authCheckState()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(re,null),r.a.createElement(ne,{show:e.gotError}),r.a.createElement($,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/workarea"},r.a.createElement(K,null)),r.a.createElement(s.b,{path:"/"},!e.authData.signedIn&&!e.authData.loading&&r.a.createElement(U,null),e.authData.loading&&r.a.createElement(te,null),e.authData.signedIn&&!e.authData.loading&&r.a.createElement(ee,null))),e.authData.signedIn&&r.a.createElement(s.a,{to:"/workarea"}))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ie={expData:{},incData:{},complectsData:{},lists:{wares:[],subwares:[],exps:[],colors:[]},loaded:!1},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA_EXP":return oe({},e,{expData:t.exp,loaded:!0});case"SET_DATA_INC":return oe({},e,{incData:t.inc,loaded:!0});case"SET_DATA_COMPLECTS":return oe({},e,{complectsData:t.complects,loaded:!0});case"CREATE_FORM_LISTS":return oe({},e,{lists:t.lists});default:return e}};function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pe={idToken:localStorage.getItem("token"),userId:localStorage.getItem("userId"),signedIn:!1,loading:!1},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN_START":return se({},e,{loading:!0});case"LOG_IN_SUCCESS":return se({},e,{idToken:t.idToken,userId:t.userId,signedIn:!0,loading:!1});case"LOG_OUT":return se({},e,{idToken:null,userId:null,signedIn:!1});case"LOG_IN_LOADING_OFF":return se({},e,{loading:!1});default:return e}};function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var de={expTable:{},incTable:{},totalStatsTable:{},incErrors:[],loaded:!1},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_EXP_TABLE":return ye({},e,{expTable:t.expTable,loaded:!0});case"CREATE_INC_TABLE":return ye({},e,{incTable:t.incTable,loaded:!0});case"COUNT_TOTAL_STATS":return ye({},e,{totalStatsTable:t.totalStatsTable});case"CHECK_FOR_INC_ERRORS":return ye({},e,{incErrors:t.incErrors});default:return e}};function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(a,!0).forEach((function(t){Object(b.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ge={gotError:!1,error:""},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL":return Oe({},e,{gotError:!0,error:t.error});case"HIDE_MODAL":return Oe({},e,{gotError:!1});default:return e}},ve=u.d,Se=Object(u.c)({data:ue,auth:Ee,tables:fe,ui:Pe}),we=Object(u.e)(Se,ve(Object(u.a)(m.a))),De=r.a.createElement(i.a,{store:we},r.a.createElement(o.a,{basename:"/sena-totem"},r.a.createElement(le,null)));c.a.render(De,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[167,1,2]]]);
//# sourceMappingURL=main.f21f0dfd.chunk.js.map