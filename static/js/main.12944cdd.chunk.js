(window["webpackJsonpsena-totem"]=window["webpackJsonpsena-totem"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(29),c=a.n(r),i=a(19),o=a(8),u=a(26),m=a(65),p=(a(81),a(22)),s=a(27),E=a(127),y=a(124),d=a(33),b=a.n(d),f=b.a.create({baseURL:"https://sena-totem.firebaseio.com/"}),D=a(15),h=a(4),x=a(120),P=a(121),g=a(122),q=function(e){return{type:"SET_DATA_EXP",exp:e}},I=function(e){return{type:"SET_DATA_INC",inc:e}},v=function(e,t){return{type:"LOG_IN_SUCCESS",idToken:e,userId:t}},S=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),{type:"LOG_OUT"}},O=function(e){return function(t){setTimeout((function(){t(S())}),1e3*e)}};function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var j=Object(o.b)((function(e){return{expData:e.data.expData,lists:e.data.lists,idToken:e.auth.idToken}}),(function(e){return{setDataExp:function(t){return e(q(t))}}}))((function(e){var t=e.lists.wares.map((function(e){return l.a.createElement("option",{key:e,value:e})})),a=e.lists.subwares.map((function(e){return l.a.createElement("option",{key:e,value:e})})),n=e.lists.exps.map((function(e){return l.a.createElement("option",{key:e,value:e})})),r=e.lists.colors.map((function(e){return l.a.createElement("option",{key:e,value:e})}));return l.a.createElement(h.e,{initialValues:{type:"",name:"",color:"",quantity:"",totalPrice:""},validate:function(e){var t={};return e.type||(t.type="\u041d\u0435\u043e\u0431\u0445\u0456\u0434\u043d\u043e \u043e\u0431\u0440\u0430\u0442\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044e!"),e.name||(t.name="\u041d\u0435\u043e\u0431\u0445\u0456\u0434\u043d\u043e \u0432\u043d\u0435\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0443!"),!isNaN(e.quantity)&&(0!==e.quantity&&""!==e.quantity||"\u0422\u043e\u0432\u0430\u0440"!==e.type&&"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"!==e.type)||(t.quantity="\u041d\u0435\u0432\u0456\u0440\u043d\u0430 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c!"),e.totalPrice&&!isNaN(e.totalPrice)||(t.totalPrice="\u041d\u0435\u0432\u0456\u0440\u043d\u0430 \u0432\u0430\u0440\u0442\u0456\u0441\u0442\u044c!"),t},onSubmit:function(t,a,n){var l=a.setSubmitting,r=a.resetForm;t.time=(new Date).toISOString().split("T")[0],""===t.color.trim()&&(t.color="\u043d/\u0437"),t.quantity=Number(t.quantity),t.totalPrice=Number(t.totalPrice),f.post("/exp.json?auth="+e.idToken,t).then((function(a){console.log(a),l(!1);var c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(D.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.expData,Object(D.a)({},a.data.name,t));e.setDataExp(c),r(n)})).catch((function(e){console.log(e)}))}},(function(e){var c=e.isSubmitting,i=e.values,o=e.setFieldValue;return l.a.createElement(x.a,null,l.a.createElement(P.a,null,l.a.createElement(g.a,null,l.a.createElement(h.d,null,l.a.createElement(P.a,null,l.a.createElement(g.a,null,l.a.createElement(h.b,{className:"radioInput",type:"radio",name:"type",value:"\u0422\u043e\u0432\u0430\u0440",checked:"\u0422\u043e\u0432\u0430\u0440"===i.type,onChange:function(){return o("type","\u0422\u043e\u0432\u0430\u0440")}}),l.a.createElement("label",null,"\u0422\u043e\u0432\u0430\u0440"),l.a.createElement(h.b,{className:"radioInput",type:"radio",name:"type",value:"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440",checked:"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===i.type,onChange:function(){return o("type","\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440")}}),l.a.createElement("label",null,"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"),l.a.createElement(h.b,{className:"radioInput",type:"radio",name:"type",value:"\u0412\u0438\u0442\u0440\u0430\u0442\u0430",checked:"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"===i.type,onChange:function(){return o("type","\u0412\u0438\u0442\u0440\u0430\u0442\u0430")}}),l.a.createElement("label",null,"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"),l.a.createElement("span",{className:"errorMessage"},l.a.createElement(h.a,{name:"type"})))),l.a.createElement(P.a,null,l.a.createElement(g.a,null,l.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430"),l.a.createElement(h.b,{name:"name",list:"name"}),l.a.createElement("datalist",{id:"name"},"\u0422\u043e\u0432\u0430\u0440"===i.type&&t,"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===i.type&&a,"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"===i.type&&n),l.a.createElement("span",{className:"errorMessage"},l.a.createElement(h.a,{name:"name"})),l.a.createElement("label",null,"\u041a\u043e\u043b\u0456\u0440"),l.a.createElement(h.b,{name:"color",list:"color"}),l.a.createElement("datalist",{id:"color"},r),l.a.createElement("label",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"),l.a.createElement(h.b,{className:"input-number",name:"quantity",type:"number",disabled:"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"===i.type}),l.a.createElement("span",{className:"errorMessage"},l.a.createElement(h.a,{name:"quantity"})),l.a.createElement("label",null,"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"),l.a.createElement(h.b,{className:"input-number",name:"totalPrice",type:"number"}),l.a.createElement("span",{className:"errorMessage"},l.a.createElement(h.a,{name:"totalPrice"})),l.a.createElement("label",null,"\u0426\u0456\u043d\u0430 \u0437\u0430 \u043e\u0434\u0438\u043d\u0438\u0446\u044e"),l.a.createElement(h.b,{className:"input-number",name:"price",value:isNaN(i.totalPrice/i.quantity)||"\u0412\u0438\u0442\u0440\u0430\u0442\u0430"===i.type?0:(i.totalPrice/i.quantity).toFixed(2),onChange:function(){return o("price",i.totalPrice/i.quantity)},disabled:!0}))),l.a.createElement(P.a,null,l.a.createElement(g.a,{xs:{span:3,offset:9}},l.a.createElement("button",{className:"submitData",type:"submit",disabled:c},"\u0412\u043d\u0435\u0441\u0442\u0438")))))))}))})),k=a(123),T=Object(o.b)((function(e){return{expData:e.data.expData,idToken:e.auth.idToken}}),(function(e){return{setDataExp:function(t){return e(q(t))}}}))((function(e){var t=function(t){var a=t.target.id;f.delete("/exp/"+a+".json?auth="+e.idToken).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));var n={};for(var l in e.expData)l!==a&&(n[l]=e.expData[l]);e.setDataExp(n)},a=e.expData?Object.keys(e.expData).reverse().map((function(a,n){return l.a.createElement("tr",{key:a},l.a.createElement("td",null,n+1),l.a.createElement("td",null,e.expData[a].time),l.a.createElement("td",null,e.expData[a].type),l.a.createElement("td",null,e.expData[a].name),l.a.createElement("td",null,e.expData[a].color),l.a.createElement("td",null,e.expData[a].quantity),l.a.createElement("td",null,e.expData[a].totalPrice),l.a.createElement("td",null,(e.expData[a].totalPrice/e.expData[a].quantity).toFixed(2)),l.a.createElement("td",null,l.a.createElement("button",{id:a,onClick:t},"x")))})):null;return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),l.a.createElement("th",null,"\u0422\u0438\u043f"),l.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430"),l.a.createElement("th",null,"\u041a\u043e\u043b\u0456\u0440"),l.a.createElement("th",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"),l.a.createElement("th",null,"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"),l.a.createElement("th",null,"\u0426\u0456\u043d\u0430 \u0437\u0430 \u043e\u0434\u0438\u043d\u0438\u0446\u044e"),l.a.createElement("th",null,"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"))),l.a.createElement("tbody",null,a)))})),F=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(j,null),l.a.createElement(T,null))};function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var _=Object(o.b)((function(e){return{incData:e.data.incData,lists:e.data.lists,idToken:e.auth.idToken}}),(function(e){return{setDataInc:function(t){return e(I(t))}}}))((function(e){var t=e.lists.wares.map((function(e){return l.a.createElement("option",{key:e,value:e},e)})),a=e.lists.subwares.map((function(e){return l.a.createElement("option",{key:e,value:e},e)})),n=e.lists.colors.map((function(e){return l.a.createElement("option",{key:e,value:e},e)}));return l.a.createElement(h.e,{initialValues:{price:"",income:[{type:"",name:"",color:"\u043d/\u0437",quantity:""}]},validate:function(e){var t={};return e.price&&!isNaN(e.price)||(t.price="\u041d\u0435\u0432\u0456\u0440\u043d\u0430 \u0446\u0456\u043d\u0430!"),e.income.length<1&&(t.income="\u041d\u0435 \u0432\u043d\u0435\u0441\u0435\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u0443!"),e.income.map((function(a,n){e.income[n].type||(t.type="\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f \u0442\u043e\u0432\u0430\u0440\u0443 \u043d\u0435 \u043e\u0431\u0440\u0430\u043d\u0430!"),e.income[n].name&&"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"!==e.income[n].name||(t.name="\u041d\u0430\u0437\u0432\u0430 \u0442\u043e\u0432\u0430\u0440\u0443 \u043d\u0435 \u043e\u0431\u0440\u0430\u043d\u0430!"),(isNaN(e.income[n].quantity)||0===e.income[n].quantity||""===e.income[n].quantity)&&(t.quantity="\u041d\u0435\u0432\u0456\u0440\u043d\u0430 \u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c!")})),t},isSubmitting:!1,onSubmit:function(t,a,n){var l=a.setSubmitting,r=a.resetForm;t.time=(new Date).toISOString().split("T")[0],f.post("/inc.json?auth="+e.idToken,t).then((function(a){console.log(a),l(!1);var c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(D.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.incData,Object(D.a)({},a.data.name,t));e.setDataInc(c),r(n)})).catch((function(e){console.log(e)}))},render:function(e){var r=e.isSubmitting,c=e.values,i=e.setFieldValue;return l.a.createElement(x.a,null,l.a.createElement(P.a,null,l.a.createElement(g.a,null,l.a.createElement(h.d,null,l.a.createElement(P.a,null,l.a.createElement(g.a,null,l.a.createElement("label",null,"\u0426\u0456\u043d\u0430",l.a.createElement(h.b,{className:"input-number",name:"price",type:"number"}),l.a.createElement("span",{className:"errorMessage"},l.a.createElement(h.a,{name:"price"})),l.a.createElement("span",{className:"errorMessage"},l.a.createElement(h.a,{name:"type"})),l.a.createElement("span",{className:"errorMessage"},l.a.createElement(h.a,{name:"name"})),l.a.createElement("span",{className:"errorMessage"},l.a.createElement(h.a,{name:"quantity"}))))),l.a.createElement(h.c,{name:"income",render:function(e){return l.a.createElement(l.a.Fragment,null,c.income&&c.income.length>0?c.income.map((function(r,o){return l.a.createElement(P.a,{key:o},l.a.createElement(g.a,null,l.a.createElement("fieldset",null,l.a.createElement(h.b,{className:"radioInput",type:"radio",name:"income.".concat(o,".type"),value:"\u0422\u043e\u0432\u0430\u0440",checked:"\u0422\u043e\u0432\u0430\u0440"===c.income[o].type,onChange:function(){return i("income.".concat(o,".type"),"\u0422\u043e\u0432\u0430\u0440")}}),l.a.createElement("label",null,"\u0422\u043e\u0432\u0430\u0440"),l.a.createElement(h.b,{className:"radioInput",type:"radio",name:"income.".concat(o,".type"),value:"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440",checked:"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===c.income[o].type,onChange:function(){return i("income.".concat(o,".type"),"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440")}}),l.a.createElement("label",null,"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440")),l.a.createElement("fieldset",null,l.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430"),l.a.createElement(h.b,{component:"select",name:"income.".concat(o,".name")},l.a.createElement("option",{value:"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"},"--\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443--"),"\u0422\u043e\u0432\u0430\u0440"===c.income[o].type&&t,"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===c.income[o].type&&a),l.a.createElement("label",null,"\u041a\u043e\u043b\u0456\u0440"),l.a.createElement(h.b,{component:"select",name:"income.".concat(o,".color")},n),l.a.createElement("label",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"),l.a.createElement(h.b,{className:"input-number",name:"income.".concat(o,".quantity"),type:"number"})),l.a.createElement("button",{className:"button-x",type:"button",onClick:function(){return e.remove(o)}},"x")))})):null,l.a.createElement(P.a,null,l.a.createElement(g.a,null,l.a.createElement("button",{type:"button",onClick:function(){e.push({type:"",name:"\u041e\u0431\u0435\u0440\u0438 \u043d\u0430\u0437\u0432\u0443",color:"\u043d/\u0437",quantity:""})}},"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a"))),l.a.createElement(P.a,null,l.a.createElement(g.a,{xs:{span:3,offset:9}},l.a.createElement("button",{className:"submitData",type:"submit",disabled:r},"\u0412\u043d\u0435\u0441\u0442\u0438"))))}})))))}})})),C=Object(o.b)((function(e){return{incData:e.data.incData,loaded:e.data.loaded,idToken:e.auth.idToken}}),(function(e){return{setDataInc:function(t){return e(I(t))}}}))((function(e){var t=function(t){var a=t.target.id;f.delete("/inc/"+a+".json?auth="+e.idToken).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));var n={};for(var l in e.incData)l!==a&&(n[l]=e.incData[l]);e.setDataInc(n)},a=e.loaded?Object.keys(e.incData).reverse().map((function(a,n){var r=e.incData[a].income.map((function(e,t){return l.a.createElement("tr",{key:"".concat(a,"_").concat(t)},l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null,e.type),l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.color),l.a.createElement("td",null,e.quantity),l.a.createElement("td",null),l.a.createElement("td",null))}));return l.a.createElement("tbody",{key:a},l.a.createElement("tr",null,l.a.createElement("td",null,n+1),l.a.createElement("td",null,e.incData[a].time),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null,e.incData[a].price),l.a.createElement("td",null,l.a.createElement("button",{id:a,onClick:t},"x"))),r)})):null;return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),l.a.createElement("th",null,"\u0422\u0438\u043f"),l.a.createElement("th",null,"\u041d\u0430\u0437\u0432\u0430"),l.a.createElement("th",null,"\u041a\u043e\u043b\u0456\u0440"),l.a.createElement("th",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"),l.a.createElement("th",null,"\u0426\u0456\u043d\u0430"),l.a.createElement("th",null,"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"))),a))})),A=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(_,{formSubmitHandler:e.onFormSubmitHandler,list:e.list,authData:e.authData}),l.a.createElement(C,{deleteRowHandler:e.onDeleteRowHandler}))},L=function(e){var t={quantityE:0,totalPriceE:0,quantityI:0,totalPriceI:0,quantityS:0,totalPriceS:0},a=e.expTable||e.incTable?Object.keys(e.expTable.ware).sort().map((function(a,n){var r={};r.name=a,r.colors=[];for(var c=0;c<e.expTable.ware[a].length;c++){var i={};if(i.color=e.expTable.ware[a][c].color,i.quantityE=e.expTable.ware[a][c].quantity,i.totalPriceE=e.expTable.ware[a][c].totalPrice,i.priceE=e.expTable.ware[a][c].price,e.incTable.ware[a]){for(var o=!1,u=0;u<e.incTable.ware[a].length;u++)e.incTable.ware[a][u].color===i.color&&(o=u);"number"==typeof o?(i.quantityI=e.incTable.ware[a][o].quantity,i.totalPriceI=e.incTable.ware[a][o].totalPrice,i.priceI=e.incTable.ware[a][o].price!==1/0?e.incTable.ware[a][o].price:0,i.quantityS=i.quantityE-i.quantityI,i.priceS=i.priceI?i.priceI:i.priceE,i.totalPriceS=i.priceS*i.quantityS):(i.quantityI=0,i.totalPriceI=0,i.priceI=0,i.quantityS=i.quantityE,i.totalPriceS=i.totalPriceE,i.priceS=i.priceE)}else i.quantityI=0,i.totalPriceI=0,i.priceI=0,i.quantityS=i.quantityE,i.totalPriceS=i.totalPriceE,i.priceS=i.priceE;r.colors.push(i)}r.quantityE=0,r.quantityI=0,r.quantityS=0,r.totalPriceE=0,r.totalPriceI=0,r.totalPriceS=0,r.colors.map((function(e){r.quantityE+=e.quantityE,r.quantityI+=e.quantityI,r.quantityS+=e.quantityS,r.totalPriceE+=e.totalPriceE,r.totalPriceI+=e.totalPriceI,r.totalPriceS+=e.totalPriceS})),r.priceE=r.totalPriceE/r.quantityE,r.priceI=0===r.totalPriceI||0===r.quantityI?0:r.totalPriceI/r.quantityI,r.priceS=r.totalPriceS/r.quantityS;var m=l.a.createElement("tr",null,l.a.createElement("th",null,n+1),l.a.createElement("th",null,r.name),l.a.createElement("th",null),l.a.createElement("th",null,r.quantityE),l.a.createElement("th",null,r.totalPriceE.toFixed(0)),l.a.createElement("th",null,r.priceE.toFixed(2)),l.a.createElement("th",null,r.quantityI),l.a.createElement("th",null,r.totalPriceI.toFixed(0)),l.a.createElement("th",null,r.priceI.toFixed(2)),l.a.createElement("th",null,r.quantityS),l.a.createElement("th",null,r.totalPriceS.toFixed(0)),l.a.createElement("th",null,r.priceS.toFixed(2))),p=r.colors.map((function(e,t){return l.a.createElement("tr",{key:"".concat(r.name,"_").concat(e.color)},l.a.createElement("td",null,"".concat(n+1,".").concat(t+1)),l.a.createElement("td",null),l.a.createElement("td",null,e.color),l.a.createElement("td",null,e.quantityE),l.a.createElement("td",null,e.totalPriceE.toFixed(0)),l.a.createElement("td",null,e.priceE.toFixed(2)),l.a.createElement("td",null,e.quantityI),l.a.createElement("td",null,e.totalPriceI.toFixed(0)),l.a.createElement("td",null,e.priceI.toFixed(2)),l.a.createElement("td",null,e.quantityS),l.a.createElement("td",null,e.totalPriceS.toFixed(0)),l.a.createElement("td",null,e.priceS.toFixed(2)))}));return t.quantityE+=r.quantityE,t.totalPriceE+=r.totalPriceE,t.quantityI+=r.quantityI,t.totalPriceI+=r.totalPriceI,t.quantityS+=r.quantityS,t.totalPriceS+=r.totalPriceS,l.a.createElement("tbody",{key:a},m,p)})):null,n=e.expTable||e.incTable?Object.keys(e.expTable.subware).sort().map((function(a,n){var r={};r.name=a,r.colors=[];for(var c=0;c<e.expTable.subware[a].length;c++){var i={};if(i.color=e.expTable.subware[a][c].color,i.quantityE=e.expTable.subware[a][c].quantity,i.totalPriceE=e.expTable.subware[a][c].totalPrice,i.priceE=e.expTable.subware[a][c].price,e.incTable.ware[a]){for(var o=!1,u=0;u<e.incTable.ware[a].length;u++)e.incTable.ware[a][u].color===i.color&&(o=u);"number"==typeof o?(i.quantityI=e.incTable.ware[a][o].quantity,i.totalPriceI=e.incTable.ware[a][o].totalPrice,i.priceI=e.incTable.ware[a][o].price!==1/0?e.incTable.ware[a][o].price:0,i.quantityS=i.quantityE-i.quantityI,i.priceS=i.priceI?i.priceI:i.priceE,i.totalPriceS=i.priceS*i.quantityS):(i.quantityI=0,i.totalPriceI=0,i.priceI=0,i.quantityS=i.quantityE,i.totalPriceS=i.totalPriceE,i.priceS=i.priceE)}else i.quantityI=0,i.totalPriceI=0,i.priceI=0,i.quantityS=i.quantityE,i.totalPriceS=i.totalPriceE,i.priceS=i.priceE;r.colors.push(i)}r.quantityE=0,r.quantityI=0,r.quantityS=0,r.totalPriceE=0,r.totalPriceI=0,r.totalPriceS=0,r.colors.map((function(e){r.quantityE+=e.quantityE,r.quantityI+=e.quantityI,r.quantityS+=e.quantityS,r.totalPriceE+=e.totalPriceE,r.totalPriceI+=e.totalPriceI,r.totalPriceS+=e.totalPriceS})),r.priceE=r.totalPriceE/r.quantityE,r.priceI=0===r.totalPriceI||0===r.quantityI?0:r.totalPriceI/r.quantityI,r.priceS=r.totalPriceS/r.quantityS;var m=l.a.createElement("tr",null,l.a.createElement("th",null,n+1),l.a.createElement("th",null,r.name),l.a.createElement("th",null),l.a.createElement("th",null,r.quantityE),l.a.createElement("th",null,r.totalPriceE.toFixed(0)),l.a.createElement("th",null,r.priceE.toFixed(2)),l.a.createElement("th",null,r.quantityI),l.a.createElement("th",null,r.totalPriceI.toFixed(0)),l.a.createElement("th",null,r.priceI.toFixed(2)),l.a.createElement("th",null,r.quantityS),l.a.createElement("th",null,r.totalPriceS.toFixed(0)),l.a.createElement("th",null,r.priceS.toFixed(2))),p=r.colors.map((function(e,t){return l.a.createElement("tr",{key:"".concat(r.name,"_").concat(e.color)},l.a.createElement("td",null,"".concat(n+1,".").concat(t+1)),l.a.createElement("td",null),l.a.createElement("td",null,e.color),l.a.createElement("td",null,e.quantityE),l.a.createElement("td",null,e.totalPriceE.toFixed(0)),l.a.createElement("td",null,e.priceE.toFixed(2)),l.a.createElement("td",null,e.quantityI),l.a.createElement("td",null,e.totalPriceI.toFixed(0)),l.a.createElement("td",null,e.priceI.toFixed(2)),l.a.createElement("td",null,e.quantityS),l.a.createElement("td",null,e.totalPriceS.toFixed(0)),l.a.createElement("td",null,e.priceS.toFixed(2)))}));return t.quantityE+=r.quantityE,t.totalPriceE+=r.totalPriceE,t.quantityI+=r.quantityI,t.totalPriceI+=r.totalPriceI,t.quantityS+=r.quantityS,t.totalPriceS+=r.totalPriceS,l.a.createElement("tbody",{key:a},m,p)})):null,r=l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"\u0412\u0441\u044c\u043e\u0433\u043e"),l.a.createElement("th",null),l.a.createElement("th",null,t.quantityE),l.a.createElement("th",null,t.totalPriceE),l.a.createElement("th",null),l.a.createElement("th",null,t.quantityI),l.a.createElement("th",null,t.totalPriceI),l.a.createElement("th",null),l.a.createElement("th",null,t.quantityS),l.a.createElement("th",null,t.totalPriceS.toFixed(2)),l.a.createElement("th",null));return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{striped:!0,bordered:!0,hover:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"\u0422\u043e\u0432\u0430\u0440"),l.a.createElement("th",null,"\u041a\u043e\u043b\u0456\u0440"),l.a.createElement("th",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u0432\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u043e"),l.a.createElement("th",null,"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u0432\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u043e"),l.a.createElement("th",null,"\u0421\u043e\u0431\u0456\u0432\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u043e\u0434\u0438\u043d\u0438\u0446\u0456"),l.a.createElement("th",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u043d\u043e"),l.a.createElement("th",null,"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u043d\u043e"),l.a.createElement("th",null,"\u0426\u0456\u043d\u0430 \u043e\u0434\u0438\u043d\u0438\u0446\u0456 \u043f\u0440\u043e\u0434\u0430\u043d\u043e"),l.a.createElement("th",null,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456"),l.a.createElement("th",null,"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456"),l.a.createElement("th",null,"\u0426\u0456\u043d\u0430 \u043e\u0434\u0438\u043d\u0438\u0446\u0456 \u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0456"))),a,n,l.a.createElement("tbody",null,r)))},M=Object(o.b)((function(e){return{expData:e.data.expData,incData:e.data.incData}}))((function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),u=o[0],m=o[1];Object(n.useEffect)((function(){var e=E(),t=p();c(e),m(t)}),[e]);var p=function(){var t={},a={};return e.incData&&e.expData?(Object.keys(e.incData).map((function(n,l){e.incData[n].income.map((function(l,r){var c={type:l.type},i=0===r?e.incData[n].price:0;if(c[l.name]={color:l.color,quantity:l.quantity,totalPrice:i,price:l.quantity/i},"\u0422\u043e\u0432\u0430\u0440"===c.type)if(t[e.incData[n].income[r].name]){for(var o=!1,u=0;u<t[e.incData[n].income[r].name].length;u++)t[e.incData[n].income[r].name][u].color===c[l.name].color&&(t[e.incData[n].income[r].name][u].quantity+=c[l.name].quantity,t[e.incData[n].income[r].name][u].totalPrice+=c[l.name].totalPrice,t[e.incData[n].income[r].name][u].price=t[e.incData[n].income[r].name][u].totalPrice/t[e.incData[n].income[r].name][u].quantity,o=!0);o||t[e.incData[n].income[r].name].push(c[l.name])}else t[e.incData[n].income[r].name]=[],t[e.incData[n].income[r].name].push(c[l.name]);else if("\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===c.type)if(a[e.incData[n].income[r].name]){for(var m=!1,p=0;p<a[e.incData[n].income[r].name].length;p++)a[e.incData[n].income[r].name][p].color===c[l.name].color&&(a[e.incData[n].income[r].name][p].quantity+=c[l.name].quantity,a[e.incData[n].income[r].name][p].totalPrice+=c[l.name].totalPrice,a[e.incData[n].income[r].name][p].price=a[e.incData[n].income[r].name][p].totalPrice/a[e.incData[n].income[r].name][p].quantity,m=!0);m||a[e.incData[n].income[r].name].push(c[l.name])}else a[e.incData[n].income[r].name]=[],a[e.incData[n].income[r].name].push(c[l.name])}))})),{ware:t,subware:a}):null},E=function(){var t={},a={},n={};return e.incData&&e.expData?(Object.keys(e.expData).map((function(l,r){if("\u0422\u043e\u0432\u0430\u0440"===e.expData[l].type)if(t.hasOwnProperty(e.expData[l].name)){for(var c=!1,i=0;i<t[e.expData[l].name].length;i++)e.expData[l].color===t[e.expData[l].name][i].color&&(t[e.expData[l].name][i].quantity+=e.expData[l].quantity,t[e.expData[l].name][i].totalPrice+=e.expData[l].totalPrice,t[e.expData[l].name][i].price=t[e.expData[l].name][i].totalPrice/t[e.expData[l].name][i].quantity,c=!0);if(!c){var o={};o.color=e.expData[l].color,o.quantity=e.expData[l].quantity,o.totalPrice=e.expData[l].totalPrice,o.price=e.expData[l].totalPrice/e.expData[l].quantity,t[e.expData[l].name].push(o)}}else{t[e.expData[l].name]=[];var u={};u.color=e.expData[l].color,u.quantity=e.expData[l].quantity,u.totalPrice=e.expData[l].totalPrice,u.price=e.expData[l].totalPrice/e.expData[l].quantity,t[e.expData[l].name].push(u)}if("\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440"===e.expData[l].type)if(a.hasOwnProperty(e.expData[l].name)){for(var m=!1,p=0;p<a[e.expData[l].name].length;p++)e.expData[l].color===a[e.expData[l].name][p].color&&(a[e.expData[l].name][p].quantity+=e.expData[l].quantity,a[e.expData[l].name][p].totalPrice+=e.expData[l].totalPrice,a[e.expData[l].name][p].price=a[e.expData[l].name][p].totalPrice/a[e.expData[l].name][p].quantity,m=!0);if(!m){var s={};s.color=e.expData[l].color,s.quantity=e.expData[l].quantity,s.totalPrice=e.expData[l].totalPrice,s.price=e.expData[l].totalPrice/e.expData[l].quantity,a[e.expData[l].name].push(s)}}else{a[e.expData[l].name]=[];var E={};E.color=e.expData[l].color,E.quantity=e.expData[l].quantity,E.totalPrice=e.expData[l].totalPrice,E.price=e.expData[l].totalPrice/e.expData[l].quantity,a[e.expData[l].name].push(E)}if("\u0412\u0438\u0442\u0440\u0430\u0442\u0430"===e.expData[l].type)if(n.hasOwnProperty(e.expData[l].name)){for(var y=!1,d=0;d<n[e.expData[l].name].length;d++)e.expData[l].color===n[e.expData[l].name][d].color&&(n[e.expData[l].name][d].quantity+=e.expData[l].quantity,n[e.expData[l].name][d].totalPrice+=e.expData[l].totalPrice,n[e.expData[l].name][d].price=n[e.expData[l].name][d].totalPrice/n[e.expData[l].name][d].quantity,y=!0);if(!y){var b={};b.color=e.expData[l].color,b.quantity=e.expData[l].quantity,b.totalPrice=e.expData[l].totalPrice,b.price=e.expData[l].totalPrice/e.expData[l].quantity,n[e.expData[l].name].push(b)}}else{n[e.expData[l].name]=[];var f={};f.color=e.expData[l].color,f.quantity=e.expData[l].quantity,f.totalPrice=e.expData[l].totalPrice,f.price=e.expData[l].totalPrice/e.expData[l].quantity,n[e.expData[l].name].push(f)}return""})),{ware:t,subware:a,exp:n}):null};return l.a.createElement(l.a.Fragment,null,l.a.createElement(L,{expTable:r,incTable:u}))})),R=(a(102),a(103),Object(o.b)((function(e){return{authData:e.auth,expData:e.data.expData,incData:e.data.incData}}),(function(e){return{getDataEI:function(t){return e(function(e){return function(t){f.get("/.json?auth="+e).then((function(e){console.log(e.data),t(q(e.data.exp)),t(I(e.data.inc))})).catch((function(e){console.log(e)}))}}(t))},createFormLists:function(t){return e(function(e){var t=[],a=[],n=[],l=[];return Object.keys(e).map((function(r){switch(e[r].type){case"\u0422\u043e\u0432\u0430\u0440":t.indexOf(e[r].name)>-1||t.push(e[r].name);break;case"\u0421\u0443\u043f\u0443\u0442\u043d\u0456\u0439 \u0442\u043e\u0432\u0430\u0440":a.indexOf(e[r].name)>-1||a.push(e[r].name);break;case"\u0412\u0438\u0442\u0440\u0430\u0442\u0430":n.indexOf(e[r].name)>-1||n.push(e[r].name)}l.indexOf(e[r].color)>-1||l.push(e[r].color)})),t.sort(),a.sort(),n.sort(),l.sort(),{type:"CREATE_FORM_LISTS",lists:{wares:t,subwares:a,exps:n,colors:l}}}(t))}}}))((function(e){var t=Object(n.useState)({}),a=Object(s.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(null),o=Object(s.a)(i,2),u=(o[0],o[1],Object(n.useState)(!1)),m=Object(s.a)(u,2),d=m[0],b=m[1];Object(n.useEffect)((function(){e.getDataEI(e.authData.idToken)}),[d]),Object(n.useEffect)((function(){e.expData&&Object.keys(e.expData).length>0&&e.createFormLists(e.expData)}),[e.expData]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{defaultActiveKey:"storage",id:"uncontrolled-tab-example"},l.a.createElement(y.a,{eventKey:"exp",title:"\u0412\u0438\u0442\u0440\u0430\u0442\u0438"},l.a.createElement(F,{onDeleteRowHandler:function(t){var a=t.target.id;f.delete("/exp/"+a+".json?auth="+e.authData.idToken).then((function(e){console.log(e)})).catch((function(e){console.log(e),b(!0)}));var n={};for(var l in r)l!==a&&(n[l]=r[l]);c(n)}})),l.a.createElement(y.a,{eventKey:"inc",title:"\u0414\u043e\u0445\u043e\u0434\u0438"},l.a.createElement(A,null)),l.a.createElement(y.a,{eventKey:"storage",title:"\u0421\u043a\u043b\u0430\u0434"},l.a.createElement(M,null))),!e.authData.signedIn&&l.a.createElement(p.a,{to:"/sena-totem"}))}))),G=(a(114),Object(o.b)((function(e){return{}}),(function(e){return{logIn:function(t){return e(function(e){return function(t){t({type:"LOG_IN_START"}),e.returnSecureToken=!0,b.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDFX9LAlOi-6ONPEXG3hw22qJT5aIo91Z4",e).then((function(e){var a=new Date((new Date).getTime()+1e3*e.data.expiresIn);localStorage.setItem("token",e.data.idToken),localStorage.setItem("userId",e.data.localId),localStorage.setItem("expirationDate",a),t(v(e.data.idToken,e.data.localId)),t(O(e.data.expiresIn))})).catch((function(e){console.log(e)}))}}(t))}}}))((function(e){return l.a.createElement(x.a,null,l.a.createElement(P.a,null,l.a.createElement(g.a,null,l.a.createElement("div",{className:"authForm"},l.a.createElement(h.e,{initialValues:{email:"",password:""},onSubmit:function(t,a){var n=a.setSubmitting;e.logIn(t),n(!1)}},(function(e){var t=e.isSubmitting;e.values,e.setFieldValue;return l.a.createElement(h.d,null,l.a.createElement(h.b,{type:"email",name:"email",placeholder:"Email"}),l.a.createElement(h.b,{type:"password",name:"password",placeholder:"Password"}),l.a.createElement("button",{type:"submit",disabled:t},"Log In"))}))))))}))),H=a(126),V=a(125),U=a(72),K=a(71),W=a.n(K),X=(a(115),Object(o.b)((function(e){return{authState:e.auth.signedIn}}),(function(e){return{logOut:function(){return e(S())}}}))((function(e){return l.a.createElement(H.a,{bg:"dark",variant:"dark"},l.a.createElement(i.b,{to:"/sena-totem",exact:!0},l.a.createElement(H.a.Brand,null,l.a.createElement(V.a,{src:W.a})," ")),l.a.createElement(U.a,{className:"mr-auto"},l.a.createElement(i.b,{className:"nav-link",to:"/sena-totem",exact:!0},"Home"),e.authState&&l.a.createElement(i.b,{className:"nav-link",to:"/sena-totem/workarea",exact:!0},"Work Area"),e.authState&&l.a.createElement("button",{className:"logout",onClick:e.logOut},"Log Out")))}))),B=(a(116),function(){return l.a.createElement("div",{className:"loader"},"loading... :)")}),J=(a(117),Object(o.b)((function(e){return{authData:e.auth}}),(function(e){return{authCheckState:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var a=new Date(localStorage.getItem("expirationDate"));if(a<=new Date)e(S());else{var n=localStorage.getItem("userId");e(v(t,n)),e(O((a.getTime()-(new Date).getTime())/1e3))}}else e(S())}))}}}))((function(e){return Object(n.useEffect)((function(){e.authCheckState()}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(X,null),l.a.createElement(p.d,null,l.a.createElement(p.b,{path:"/sena-totem/workarea"},l.a.createElement(R,null)),l.a.createElement(p.b,{path:"/"},!e.authData.signedIn&&!e.authData.loading&&l.a.createElement(G,null),e.authData.loading&&l.a.createElement(B,null))),e.authData.signedIn&&l.a.createElement(p.a,{to:"/sena-totem/workarea"}))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach((function(t){Object(D.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $={expData:{},incData:{},lists:{wares:[],subwares:[],exps:[],colors:[]},loaded:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA_EXP":return Z({},e,{expData:t.exp,loaded:!0});case"SET_DATA_INC":return Z({},e,{incData:t.inc,loaded:!0});case"CREATE_FORM_LISTS":return Z({},e,{lists:t.lists});default:return e}};function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach((function(t){Object(D.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var te={idToken:localStorage.getItem("token"),userId:localStorage.getItem("userId"),signedIn:!1,loading:!1},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN_START":return ee({},e,{loading:!0});case"LOG_IN_SUCCESS":return ee({},e,{idToken:t.idToken,userId:t.userId,signedIn:!0,loading:!1});case"LOG_OUT":return ee({},e,{idToken:null,userId:null,signedIn:!1});default:return e}},ne=u.d,le=Object(u.c)({data:Q,auth:ae}),re=Object(u.e)(le,ne(Object(u.a)(m.a))),ce=l.a.createElement(o.a,{store:re},l.a.createElement(i.a,null,l.a.createElement(J,null)));c.a.render(ce,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t,a){e.exports=a.p+"static/media/logo.edfb4b75.jpg"},73:function(e,t,a){e.exports=a(118)},81:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.12944cdd.chunk.js.map